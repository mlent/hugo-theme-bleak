jQuery(function(a){function b(a){o?(a.removeClass("active"),m.removeClass("menu-active"),setTimeout(function(){a.removeClass("initial"),m.removeClass("menu-initial")},300),o=!1):(m.addClass("menu-initial"),a.addClass("initial"),setTimeout(function(){m.addClass("menu-active"),a.addClass("active")},1),o=!0)}function c(){a(".menu-list-item a").each(function(){var b=a(this);b.removeClass("current"),b.attr("href")==window.location.href&&b.addClass("current")})}function d(){a(".post-list .post .post-image img").each(function(){var b=a(this);b.load(function(){b.parents(".post-image").css({height:"0","padding-bottom":100/b.width()*b.height()+"%"})})});var b=a(".post-list").masonry({itemSelector:".post",isAnimated:!1,gutter:0,columnWidth:1,transitionDuration:0}).imagesLoaded().always(function(){b.masonry("layout")})}function e(){a("pre code").each(function(b,c){hljs.highlightBlock(c);var d=a(this),e=d.html().split(/\n/).length,f=[];for(b=1;e>b;b++)f+='<span class="line">'+b+"</span>";d.parent().addClass("codeblock").append('<div class="lines">'+f+"</div>")})}function f(){a("#wrapper").fitVids()}function g(){if("undefined"!=typeof disqus_shortname&&document.getElementById("disqus_thread")){if(window.DISQUS)return DISQUS.reset({reload:!0,config:function(){this.page.identifier=location.pathname,this.page.url=location.origin+location.pathname}});a.ajax({type:"GET",url:"//"+disqus_shortname+".disqus.com/embed.js",dataType:"script",cache:!0})}else a(".post-comments").css({display:"none"})}function h(){a("[data-gist-id]").gist()}function i(){a("img[data-lazy]").unveil().imgPin({position:2,pinImg:"//assets.pinterest.com/images/pidgets/pinit_fg_en_rect_red_20.png"})}function j(){d(),k(),e(),f(),g(),h(),c(),i()}function k(){a('a[href^="'+window.location.origin+'"], .post-image a, .post-title a, .post-more a, .post-meta a, .post-tags a, #pagination a').each(function(){var b=a(this);b.hasClass("rss")||(b.addClass("js-ajax-link"),b.attr("href").indexOf("page")>-1&&b.addClass("js-archive-index"),b.attr("href")==window.location.origin&&b.addClass("js-show-index"),b.attr("href").indexOf("tag")>-1&&b.addClass("js-tag-index"),b.attr("href").indexOf("author")>-1&&b.addClass("js-author-index"))})}function l(){a(".post-content a").click(function(){var b=a(this).attr("href"),c=window.location.pathname;if(b){if(-1!==b.indexOf("notanomadblog"))return void window.ga("send","event","Click","Internal Link",b+" @ "+c);var d="",e="";a(this).hasClass("place")?(d="Place Link",e=b):void 0!==a(this).attr("data-affiliate")?(d="Affiliate Link",e=a(this).attr("data-product")+" @ "+a(this).attr("data-location")):(d="Normal Link",e=b),window.ga("send","event","External Link",d,e+" @ "+c)}})}var m=a("html"),n=a("body");!function(a){a.fn.unveil=function(b,c){function d(){var b=j.filter(function(){var b=a(this);if(!b.is(":hidden")){var c=f.scrollTop(),d=c+f.height(),e=b.offset().top,h=e+b.height();return h>=c-g&&d+g>=e}});e=b.trigger("unveil"),j=j.not(e)}var e,f=a(window),g=b||0,h=window.devicePixelRatio>1,i=h?"data-lazy-retina":"data-lazy",j=this;return this.one("unveil",function(){var a=this.getAttribute(i);a=a||this.getAttribute("data-lazy"),a&&(this.setAttribute("src",a),"function"==typeof c&&c.call(this))}),f.on("scroll.unveil resize.unveil lookup.unveil",d),d(),this}}(window.jQuery||window.Zepto),i(),n.on("click",'[data-action="menu"]',function(){var c=(a(this).data("action"),a('[data-target="'+a(this).data("target")+'"]').not("[data-action]"));b(c)});var o=!1;n.on("click",".overlay, #menu a",function(){if(m.hasClass("menu-active")){var c=a('[data-target="menu"]').not("[data-action]");b(c)}}),c(),d(),e(),f(),g(),h(),k();var p=window.History,q=!1,r=a("#ajax-container");if(!p.enabled)return!1;p.Adapter.bind(window,"statechange",function(){m.addClass("loading");var b=p.getState();a.get(b.url,function(b){var c=a(b),d=a("#ajax-container",c).contents(),e=b.match(/<title>(.*?)<\/title>/)[1];r.fadeOut(500,function(){m.hasClass("push-next")&&(m.removeClass("push-next"),m.addClass("pushed-next")),m.hasClass("push-prev")&&(m.removeClass("push-prev"),m.addClass("pushed-prev")),document.title=a("<textarea/>").html(e).text(),r.html(d),n.removeClass(),n.addClass(a("#body-class").attr("class")),NProgress.done(),r.fadeIn(500),a(document).scrollTop(0),setTimeout(function(){m.removeClass("loading")},50),j(),q=!1})})}),a("body").on("click",".js-ajax-link",function(b){b.preventDefault();var c=a(this);if(c.hasClass("post-nav-item")||c.hasClass("pagination-item")?((c.hasClass("post-nav-next")||c.hasClass("pagination-next"))&&(m.removeClass("pushed-prev"),m.addClass("push-next")),(c.hasClass("post-nav-prev")||c.hasClass("pagination-prev"))&&(m.removeClass("pushed-next"),m.addClass("push-prev"))):(m.removeClass("pushed-next"),m.removeClass("pushed-prev")),q===!1){var d=p.getState(),e=a(this).prop("href"),f=a(this).attr("title")||null;e.replace(/\/$/,"")!==d.url.replace(/\/$/,"")&&(q=!0,m.addClass("loading"),NProgress.start(),p.pushState({},f,e))}});var s=new Instafeed({get:"user",userId:"3066755405",limit:9,template:"<a href=\"{{link}}\" target=\"_blank\" onClick=\"ga('send', 'event', 'Social', 'Instagram Thumbnail', '{{link}} @ instafeed')\"><img src=\"{{image}}\"></a>",accessToken:"3066755405.e236d3d.4c6bd2bb878c432db0c4b99b91893700"});s.run(),a("body").on("click","#post-index .post .js-ajax-link",function(){var b=a(this).parents(".post");b.addClass("initial"),setTimeout(function(){b.addClass("active"),l()},1)}),l()}),function(a){function b(a){var b,c,d=[];if("number"==typeof a)d.push(a);else{c=a.split(",");for(var e=0;e<c.length;e++)if(b=c[e].split("-"),2===b.length)for(var f=parseInt(b[0],10);f<=b[1];f++)d.push(f);else 1===b.length&&d.push(parseInt(b[0],10))}return d}a.fn.gist=function(){return this.each(function(){var c,d,e,f,g,h,i,j,k,l,m=a(this),n={};return m.css("display","block"),c=m.data("gist-id")||"",e=m.data("gist-file"),i=m.data("gist-hide-footer")===!0,j=m.data("gist-hide-line-numbers")===!0,f=m.data("gist-line"),h=m.data("gist-highlight-line"),l=m.data("gist-show-spinner")===!0,k=l?!1:void 0!==m.data("gist-show-loading")?m.data("gist-show-loading"):!0,e&&(n.file=e),c?(d="https://gist.github.com/"+c+".json",g="Loading gist "+d+(n.file?", file: "+n.file:"")+"...",k&&m.html(g),l&&m.html('<img style="display:block;margin-left:auto;margin-right:auto"  alt="'+g+'" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif">'),void a.ajax({url:d,data:n,dataType:"jsonp",timeout:1e4,success:function(c){var e,g,k,l,n;c&&c.div?(c.stylesheet&&(0===c.stylesheet.indexOf("<link")?c.stylesheet=c.stylesheet.replace(/\\/g,"").match(/href=\"([^\s]*)\"/)[1]:0!==c.stylesheet.indexOf("http")&&(0!==c.stylesheet.indexOf("/")&&(c.stylesheet="/"+c.stylesheet),c.stylesheet="https://gist.github.com"+c.stylesheet)),c.stylesheet&&0===a('link[href="'+c.stylesheet+'"]').length&&(e=document.createElement("link"),g=document.getElementsByTagName("head")[0],e.type="text/css",e.rel="stylesheet",e.href=c.stylesheet,g.insertBefore(e,g.firstChild)),n=a(c.div),n.removeAttr("id"),m.html("").append(n),h&&(l=b(h),n.find("td.line-data").css({width:"100%"}),n.find(".js-file-line").each(function(b){-1!==a.inArray(b+1,l)&&a(this).css({"background-color":"rgb(255, 255, 204)"})})),f&&(k=b(f),n.find(".js-file-line").each(function(b){-1===a.inArray(b+1,k)&&a(this).parent().remove()})),i&&(n.find(".gist-meta").remove(),n.find(".gist-data").css("border-bottom","0px"),n.find(".gist-file").css("border-bottom","1px solid #ddd")),j&&n.find(".js-line-number").remove()):m.html("Failed loading gist "+d)},error:function(a,b){m.html("Failed loading gist "+d+": "+b)}})):!1})},a(function(){a("[data-gist-id]").gist()})}(jQuery),function(a){a.fn.imgPin=function(b){var c={pinImg:"https://assets.pinterest.com/images/pidgets/pin_it_button.png",position:1},b=a.extend({},c,b),d=encodeURIComponent(document.URL),e=b.pinImg,f="";switch(b.position){case 1:f="top left";break;case 2:f="top right";break;case 3:f="bottom right";break;case 4:f="bottom left";break;case 5:f="center"}this.each(function(){var b=window.location.port,c="http://"+window.location.hostname+(b?":"+b:"")+(a(this).attr("src")||a(this).attr("data-lazy")),g=d,h=a(this).attr("title"),i=encodeURIComponent(h),j=encodeURIComponent(c),k="https://www.pinterest.com/pin/create/button/";k+="?url="+g,k+="&media="+j,k+="&description="+i,a(this).wrap('<div class="imgPinWrap">').after('<a href="'+k+'" class="pin '+f+'"><img src="'+e+'" alt="Pin this!"></a>'),a(".imgPinWrap .pin").click(function(){var a=700,b=400,c=screen.width/2-a/2,d=screen.height/2-b/2,e=window.open(this.href,"imgPngWindow","toolbar=no, location=no, status=no, menubar=no, scrollbars=yes, resizable=yes, width=700, height=400");return e.moveTo(c,d),!1})})}}(jQuery);